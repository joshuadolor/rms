---
description: When adding a new API endpoint, document it in docs/API-REFERENCE.md
globs: api/routes/**/*.php, api/app/Http/Controllers/Api/**/*.php
alwaysApply: true
---

# API reference â€“ backend

## Security: no internal id in responses

**Never expose the internal numeric `id` (primary key) in any API response.** Use the public **`uuid`** (or entity-specific public identifier) only. This avoids enumeration and keeps internal IDs hidden. All user/entity payloads must return `uuid` (and other safe fields), never `id`.

## Documenting endpoints

When you add or change an **API endpoint** in this project:

1. **Update `docs/API-REFERENCE.md`** so it stays the single source of truth.
2. For each new or changed endpoint, add or edit the entry with:
   - Method and path (e.g. `POST /api/...`)
   - Auth required? (No / Bearer / Bearer + verified)
   - Rate limit if any
   - Request body (fields and validation)
   - Response shape (200/201 and error responses)
3. Add a short line to the **Changelog** at the bottom of `docs/API-REFERENCE.md` with the date and what changed.

This keeps the frontend (and frontend agents) aligned with the backend API.
